(function(e,t,n,r){var i=30,s=90,o=40,u=10,a=e.rad2deg=function(e){return e/(Math.PI/180)},f=e.deg2rad=function(e){return e*(Math.PI/180)},l=navigator.platform.toLowerCase(),c=navigator.userAgent.toLowerCase(),h=(c.indexOf("iphone")>-1||c.indexOf("ipad")>-1||c.indexOf("ipod")>-1)&&(l.indexOf("iphone")>-1||l.indexOf("ipad")>-1||l.indexOf("ipod")>-1),p=e.Picker=function(e,t){var n=this;n.holder=e,n.options=t||{},n.init(),n.initInertiaParams(),n.calcElementItemPostion(!0),n.bindEvent()};p.prototype.findElementItems=function(){var e=this;return e.elementItems=[].slice.call(e.holder.querySelectorAll("li")),e.elementItems},p.prototype.init=function(){var e=this;e.list=e.holder.querySelector("ul"),e.findElementItems(),e.height=e.holder.offsetHeight,e.r=e.height/2-u,e.d=e.r*2,e.itemHeight=e.elementItems.length>0?e.elementItems[0].offsetHeight:o,e.itemAngle=parseInt(e.calcAngle(e.itemHeight*.8)),e.hightlightRange=e.itemAngle/2,e.visibleRange=s,e.beginAngle=0,e.beginExceed=e.beginAngle-i,e.list.angle=e.beginAngle,h&&(e.list.style.webkitTransformOrigin="center center "+e.r+"px")},p.prototype.calcElementItemPostion=function(e){var t=this;e&&(t.items=[]),t.elementItems.forEach(function(n){var r=t.elementItems.indexOf(n);t.endAngle=t.itemAngle*r,n.angle=t.endAngle,n.style.webkitTransformOrigin="center center -"+t.r+"px",n.style.webkitTransform="translateZ("+t.r+"px) rotateX("+ -t.endAngle+"deg)";if(e){var i={};i.text=n.innerHTML||"",i.value=n.getAttribute("data-value")||i.text,t.items.push(i)}}),t.endExceed=t.endAngle+i,t.calcElementItemVisibility(t.beginAngle)},p.prototype.calcAngle=function(e){var t=this,n=b=parseFloat(t.r);e=Math.abs(e);var r=parseInt(e/t.d)*180;e%=t.d;var i=(n*n+b*b-e*e)/(2*n*b),s=r+a(Math.acos(i));return s},p.prototype.calcElementItemVisibility=function(e){var t=this;t.elementItems.forEach(function(n){var r=Math.abs(n.angle-e);r<t.hightlightRange?n.classList.add("highlight"):r<t.visibleRange?(n.classList.add("visible"),n.classList.remove("highlight")):(n.classList.remove("highlight"),n.classList.remove("visible"))})},p.prototype.setAngle=function(e){var t=this;t.list.angle=e,t.list.style.webkitTransform="perspective(1000px) rotateY(0deg) rotateX("+e+"deg)",t.calcElementItemVisibility(e)},p.prototype.bindEvent=function(){var t=this,n=0,r=null,i=!1;t.holder.addEventListener(e.EVENT_START,function(e){t.options.AnimationStart(),i=!0,e.preventDefault(),t.list.style.webkitTransition="",r=(e.changedTouches?e.changedTouches[0]:e).pageY,n=t.list.angle,t.updateInertiaParams(e,!0)},!1),t.holder.addEventListener(e.EVENT_END,function(e){i=!1,e.preventDefault(),t.startInertiaScroll(e)},!1),t.holder.addEventListener(e.EVENT_CANCEL,function(e){i=!1,e.preventDefault(),t.startInertiaScroll(e)},!1),t.holder.addEventListener(e.EVENT_MOVE,function(e){if(!i)return;e.preventDefault();var s=(e.changedTouches?e.changedTouches[0]:e).pageY,o=s-r,u=t.calcAngle(o),a=o>0?n-u:n+u;a>t.endExceed&&(a=t.endExceed),a<t.beginExceed&&(a=t.beginExceed),t.setAngle(a),t.updateInertiaParams(e)},!1),t.list.addEventListener("tap",function(e){elementItem=e.target,elementItem.tagName=="LI"&&t.setSelectedIndex(t.elementItems.indexOf(elementItem),200)},!1)},p.prototype.initInertiaParams=function(){var e=this;e.lastMoveTime=0,e.lastMoveStart=0,e.stopInertiaMove=!1},p.prototype.updateInertiaParams=function(e,t){var n=this,r=e.changedTouches?e.changedTouches[0]:e;if(t)n.lastMoveStart=r.pageY,n.lastMoveTime=e.timeStamp||Date.now(),n.startAngle=n.list.angle;else{var i=e.timeStamp||Date.now();i-n.lastMoveTime>300&&(n.lastMoveTime=i,n.lastMoveStart=r.pageY)}n.stopInertiaMove=!0},p.prototype.startInertiaScroll=function(e){var t=this,n=e.changedTouches?e.changedTouches[0]:e,r=e.timeStamp||Date.now(),i=(n.pageY-t.lastMoveStart)/(r-t.lastMoveTime),s=i>0?-1:1,o=s*6e-4*-1,u=Math.abs(i/o),a=i*u/2,f=t.list.angle,l=t.calcAngle(a)*s,c=l;f+l<t.beginExceed&&(l=t.beginExceed-f,u=u*(l/c)*.6),f+l>t.endExceed&&(l=t.endExceed-f,u=u*(l/c)*.6);if(l==0){t.endScroll();return}t.scrollDistAngle(r,f,l,u)},p.prototype.scrollDistAngle=function(e,t,n,r){var i=this;i.stopInertiaMove=!1,function(e,t,n,r){var s=13,o=r/s,u=0;(function a(){if(i.stopInertiaMove)return;var e=i.quartEaseOut(u,t,n,o);i.setAngle(e),u++;if(u>o-1||e<i.beginExceed||e>i.endExceed){i.endScroll();return}setTimeout(a,s)})()}(e,t,n,r)},p.prototype.quartEaseOut=function(e,t,n,r){return-n*((e=e/r-1)*e*e*e-1)+t},p.prototype.endScroll=function(){var e=this;if(e.list.angle<e.beginAngle)e.list.style.webkitTransition="150ms ease-out",e.setAngle(e.beginAngle);else if(e.list.angle>e.endAngle)e.list.style.webkitTransition="150ms ease-out",e.setAngle(e.endAngle);else{var t=parseInt((e.list.angle/e.itemAngle).toFixed(0));e.list.style.webkitTransition="100ms ease-out",e.setAngle(e.itemAngle*t)}e.triggerChange()},p.prototype.triggerChange=function(t){check=!1;var n=this;setTimeout(function(){var r=n.getSelectedIndex(),i=n.items[r];e.trigger&&(r!=n.lastIndex||t===!0)&&e.trigger(n.holder,"change",{index:r,item:i}),n.lastIndex=r,typeof t=="function"&&t(),n.options.AnimationEnd()},0)},p.prototype.correctAngle=function(e){var t=this;return e<t.beginAngle?t.beginAngle:e>t.endAngle?t.endAngle:e},p.prototype.setItems=function(e){var t=this;t.items=e||[];var n=[];t.items.forEach(function(e){e!==null&&e!==r&&n.push("<li>"+(e.text||e)+"</li>")}),t.list.innerHTML=n.join(""),t.findElementItems(),t.calcElementItemPostion(),t.setAngle(t.correctAngle(t.list.angle)),t.triggerChange(!0)},p.prototype.getItems=function(){var e=this;return e.items},p.prototype.getSelectedIndex=function(){var e=this;return parseInt((e.list.angle/e.itemAngle).toFixed(0))},p.prototype.setSelectedIndex=function(e,t,n){var r=this;r.list.style.webkitTransition="";var i=r.correctAngle(r.itemAngle*e);if(t&&t>0){var s=i-r.list.angle;r.scrollDistAngle(Date.now(),r.list.angle,s,t)}else r.setAngle(i);r.triggerChange(n)},p.prototype.getSelectedItem=function(){var e=this;return e.items[e.getSelectedIndex()]},p.prototype.getSelectedValue=function(){var e=this;return(e.items[e.getSelectedIndex()]||{}).value},p.prototype.getSelectedText=function(){var e=this;return(e.items[e.getSelectedIndex()]||{}).text},p.prototype.setSelectedValue=function(e,t,n){var r=this;for(var i in r.items){var s=r.items[i];if(s.value==e){r.setSelectedIndex(i,t,n);return}}},e.fn&&(e.fn.picker=function(e){return this.each(function(t,n){if(n.picker)return;if(e)n.picker=new p(n,e);else{var r=n.getAttribute("data-picker-options"),i=r?JSON.parse(r):{};n.picker=new p(n,i)}}),this[0]?this[0].picker:null})})(window.mui||window,window,document,undefined);