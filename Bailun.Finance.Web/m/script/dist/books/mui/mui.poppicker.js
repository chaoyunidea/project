(function(e,t){e.dom=function(n){return typeof n!="string"?n instanceof Array||n[0]&&n.length?[].slice.call(n):[n]:(e.__create_dom_div__||(e.__create_dom_div__=t.createElement("div")),e.__create_dom_div__.innerHTML=n,[].slice.call(e.__create_dom_div__.childNodes))};var n='<div class="mui-poppicker">		<div class="mui-poppicker-header">			<button class="mui-btn mui-poppicker-btn-cancel">取消</button>			<button class="mui-btn mui-btn-blue mui-poppicker-btn-ok">确定</button>			<div class="mui-poppicker-clear"></div>		</div>		<div class="mui-poppicker-body">		</div>	</div>',r='<div class="mui-picker">		<div class="mui-picker-inner">			<div class="mui-pciker-rule mui-pciker-rule-ft"></div>			<ul class="mui-pciker-list">			</ul>			<div class="mui-pciker-rule mui-pciker-rule-bg"></div>		</div>	</div>',i=e.PopPicker=e.Class.extend({init:function(r){var i=this;i.options=r||{},i.options.buttons=i.options.buttons||["取消","确定"],i.panel=e.dom(n)[0],t.body.appendChild(i.panel),i.ok=i.panel.querySelector(".mui-poppicker-btn-ok"),i.cancel=i.panel.querySelector(".mui-poppicker-btn-cancel"),i.body=i.panel.querySelector(".mui-poppicker-body"),i.mask=e.createMask(),i.cancel.innerText=i.options.buttons[0],i.ok.innerText=i.options.buttons[1],i.cancel.addEventListener("tap",function(e){i.hide()},!1),i.ok.addEventListener("tap",function(e){if(i.callback){var t=i.callback(i.getSelectedItems());t!==!1&&i.hide()}},!1),i.mask[0].addEventListener("tap",function(){i.hide()},!1),i._createPicker(),i.panel.addEventListener(e.EVENT_START,function(e){e.preventDefault()},!1),i.panel.addEventListener(e.EVENT_MOVE,function(e){e.preventDefault()},!1)},_createPicker:function(){var t=this,n=t.options.layer||1,i=100/n+"%";t.pickers=[];for(var s=1;s<=n;s++){var o=e.dom(r)[0];o.style.width=i,t.body.appendChild(o);var u=e(o).picker({AnimationEnd:t.options.AnimationEnd||function(){},AnimationStart:t.options.AnimationStart||function(){}});t.pickers.push(u),o.addEventListener("change",function(e){var t=this.nextSibling;if(t&&t.picker){var n=e.detail||{},r=n.item||{};t.picker.setItems(r.children)}},!1)}},setData:function(e){var t=this;e=e||[],t.pickers[0].setItems(e)},getSelectedItems:function(){var e=this,t=[];for(var n in e.pickers){var r=e.pickers[n];t.push(r.getSelectedItem()||{})}return t},show:function(n){var r=this;r.callback=n,r.mask.show(),t.body.classList.add(e.className("poppicker-active-for-page")),r.panel.classList.add(e.className("active")),r.__back=e.back,e.back=function(){r.hide()}},hide:function(){var n=this;if(n.disposed)return;n.panel.classList.remove(e.className("active")),n.mask.close(),t.body.classList.remove(e.className("poppicker-active-for-page")),e.back=n.__back},dispose:function(){var e=this;e.hide(),setTimeout(function(){e.panel.parentNode.removeChild(e.panel);for(var t in e)e[t]=null,delete e[t];e.disposed=!0},300)}})})(mui,document);